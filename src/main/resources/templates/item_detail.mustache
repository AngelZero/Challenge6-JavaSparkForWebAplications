<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{{name}}</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="/offer.css">
    <style>
        /* 12-col grid; each panel spans 6 */
        .detail-grid {
          display: grid;
          grid-template-columns: repeat(12, 1fr);
          gap: 20px;
          align-items: start;
        }
        .detail-col-left  { grid-column: 1 / span 6; }
        .detail-col-right { grid-column: 7 / span 6; }


    </style>
</head>
<body>
<a class="back-link" href="/ui/items">&larr; Back to list</a>

<div class="container">
    <div class="detail-grid">
        <!-- LEFT COLUMN: item details (6/12) -->
        <div class="detail-col-left">
            <div class="detail-name" id="name-{{id}}">{{name}}</div>
            <div class="detail-price">
                <span id="price-{{id}}">{{price}}</span>
                <span id="currency-{{id}}">{{currency}}</span>
            </div>
            <div class="detail-description" id="description-{{id}}">{{description}}</div>

            <button id="offer-toggle" class="offer-btn" type="button" style="margin-top:16px;">Make an offer</button>
        </div>

        <!-- RIGHT COLUMN: offer form (6/12) -->
        <div class="detail-col-right">
            <div id="offer-form-col" style="display:none;">
                <form id="offer-form" class="form-container" action="/api/offer" method="POST">
                    <input type="hidden" id="current-item-id" name="id" value="{{id}}">
                    <div class="form-item">
                        <label class="form-label" for="name-input">Name</label>
                        <input class="form-input" id="name-input" name="name" type="text" required>
                    </div>
                    <div class="form-item">
                        <label class="form-label" for="email-input">Email</label>
                        <input class="form-input" id="email-input" name="email" type="email" required>
                    </div>
                    <div class="form-item">
                        <label class="form-label" for="amount-input">Amount</label>
                        <input class="form-input" id="amount-input" name="amount" type="number" step="0.01" min="0" required>
                    </div>
                    <button class="form-button" type="submit">Submit offer</button>
                    <div class="error-message" id="offer-error" style="display:none;"></div>
                    <div id="offer-success" class="hidden" style="margin-top:8px; color:green; display:none;">Offer submitted!</div>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- OFFERS TABLE (below) -->
<div class="container" style="margin-top:24px;">
    <h2>Offers</h2>
    <table id="offer-table">
        <thead>
        <tr><th>Name</th><th>Email</th><th>Amount</th></tr>
        </thead>
        <tbody id="offer-tbody">
        {{#offers}}
            <tr>
                <td><span class="offer-name">{{name}}</span></td>
                <td><span class="offer-email">{{email}}</span></td>
                <td><span class="offer-amount">{{amount}}</span></td>
            </tr>
        {{/offers}}
        {{^offers}}
            <tr><td colspan="3">No offers yet.</td></tr>
        {{/offers}}
        </tbody>
    </table>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<!--<script>-->
<!--    // simple toggle so the form appears in the right column "when shown"-->
<!--    document.getElementById('offer-toggle').addEventListener('click', function() {-->
<!--      var col = document.getElementById('offer-form-col');-->
<!--      col.style.display = (col.style.display === 'none' || !col.style.display) ? 'block' : 'none';-->
<!--    });-->
<!--</script>-->
<script src="/offer.js"></script>
<script src="/ws.js"></script>
</body>
</html>
